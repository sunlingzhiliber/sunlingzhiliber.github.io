---
layout:     post
title:      杂七杂八：
subtitle:   分布式、java中间件、Web服务器
date:       2018-07-10
author:     Liber Sun
header-img: img/post-basic.jpg
catalog: true
tags:
    - 面试之路
---

分布式、java中间件、Web服务器
>中间件是一类独立的系统软件或服务程序，分布式应用软件借助这种软件在不同的技术之间共享资源。中间件位于客户机/服务器的操作系统之上，管理计算机资源和网络通信

在Java web开发的演进与进化中，我们对于消息系统，数据库，服务化接口的抽象等，涉及数据分离的过程中，在分离过程中，就会涉及到分离后系统间，数据库间的交互。java中间件就是处理我们数据间交互，连接数据分离后两个系统间的通信，中间件不属于任何一个开发项目，就是让我们对应系统间或者数据库间数据流通无感知。

java中间件就是处理两个系统之间的通信，简单的说就是将具体业务和底层逻辑解耦的组件。具体体现在下面三个领域：
1. 远程过程调用(Remote Procedure Call)
主要解决分布式环境下应用的互相访问问题
2. 面向消息的中间件(Message-Oriented Middleware)
解决了应用之间的消息传递、解耦、异步的问题
3. 数据访问中间件
主要解决访问数据库的共性问题的组件，比如说JDBC



# ZooKeeper
## 客户端架构
## 服务器端单机版和集群版，对应的请求处理器
## 集群版session的建立和激活过程
## Leader选举过程
## 事务日志和快照文件的详细解析
## 实现分布式锁、分布式ID分发器
## 实现Leader选举
## ZAB协议实现一致性原理


# 序列化和反序列化
## Avro研究
## Thrift研究
## Protobuf研究
## Protostuff研究
## Hessian



# RPC框架dubbo源码
## dubbo扩展机制的实现，对比SPI机制
## 服务的发布过程
## 服务的订阅过程
## RPC通信的设计



# NIO模块以及对应的Netty和Mina、thrift源码
## TCP握手和断开及有限状态机
## backlog
## BIO NIO
## 阻塞/非阻塞的区别、同步/异步的区别
## 阻塞IO、非阻塞IO、多路复用IO、异步IO
## Reactor线程模型
## jdk的poll、epoll与底层poll、epoll的对接实现
## Netty自己的epoll实现
## 内核层poll、epoll的大致实现
## epoll的边缘触发和水平触发
## Netty的EventLoopGroup设计
## Netty的ByteBuf设计
## Netty的ChannelHandler
## Netty的零拷贝
## Netty的线程模型，特别是与业务线程以及资源释放方面的理解


# 消息队列kafka、RocketMQ、Notify、Hermes
## kafka的文件存储设计
## kafka的副本复制过程
## kafka副本的leader选举过程
## kafka的消息丢失问题
## kafka的消息顺序性问题
## kafka的isr设计和过半对比
## kafka本身做的很轻量级来保持高效，很多高级特性没有：事务、优先级的消息、消息的过滤，更重要的是服务治理不健全，一旦出问题，不能直观反应出来，不太适合对数据要求十分严苛的企业级系统，而适合日志之类并发量大但是允许少量的丢失或重复等场景
## Notify、RocketMQ的事务设计
## 基于文件的kafka、RocketMQ和基于数据库的Notify和Hermes
## 设计一个消息系统要考虑哪些方面
## 丢失消息、消息重复、高可用等话题









# 数据库的分库分表mycat

# NoSql数据库mongodb
# KV键值系统memcached redis
## redis对客户端的维护和管理，读写缓冲区
## redis事务的实现
## Jedis客户端的实现
## edisPool以及ShardedJedisPool的实现
## redis epoll实现，循环中的文件事件和时间事件
## redis的RDB持久化，save和bgsave
## redis AOF命令追加、文件写入、文件同步到磁盘
## redis AOF重写，为了减少阻塞时间采取的措施
## redis的LRU内存回收算法
## redis的master slave复制
## redis的sentinel高可用方案
## redis的cluster分片方案




# web服务器tomcat的设计原理
## tomcat的整体架构设计
## tomcat对通信的并发控制
## http请求到达tomcat的整个处理流程




# ELK日志实时处理查询系统
Elasticsearch、Logstash、Kibana


# 服务方面
## SOA与微服务

## 服务的合并部署、多版本自动快速切换和回滚
[多应用部署](https://oss-cn-hangzhou.aliyuncs.com/yqfiles/03e7087f9d56b7b674df903ad9345827.%E5%9F%BA%E4%BA%8EJava%E5%AE%B9%E5%99%A8%E7%9A%84%E5%A4%9A%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2%E6%8A%80%E6%9C%AF%E5%AE%9E%E8%B7%B5.pdf)

## 服务的治理：限流、降级
[服务的治理](http://jinnianshilongnian.iteye.com/category/344044)
服务限流：令牌桶、漏桶

服务降级、服务的熔断、服务的隔离：netflix的hystrix组件
## 服务的线性扩展
无状态的服务如何做线性扩展：
如一般的web应用，直接使用硬件或者软件做负载均衡，简单的轮训机制
有状态服务如何做线性扩展：
如Redis的扩展：一致性hash，迁移工具

## 服务链路监控和报警：CAT、Dapper、Pinpoint




# Spring Cloud
## Spring Cloud Zookeeper:用于服务注册和发现
## Spring Cloud Config:分布式配置
## Spring Cloud Netflix Eureka：用于rest服务的注册和发现
## Spring Cloud Netflix Hystrix：服务的隔离、熔断和降级
## Spring Cloud Netflix Zuul:动态路由，API Gateway




---------------------------
过于繁琐请参考
[Google 十年技术栈](https://blog.csdn.net/sdmxdzb/article/details/71191592)
## 分布式事务
## 一致性算法
