---
layout:     post
title:      编程风格：面向XXX的编程
date:       2018-07-10
author:     Liber Sun
header-img: img/post-basic.jpg
catalog: true
tags:
    - 面向过程编程
    - 面向对象编程
    - 领域驱动设计
    - 函数式编程
    - 响应式编程
---

# 领域驱动设计

传统的设计往往是针对数据为中心的开发方式，结合目前的REST风格API设计，很容易便能开发出一个简单的`CURD`的项目。
也正是由于针对数据开发， 即针对数据库开发，用了数据库导致业务模型被数据库给绑定了，因此会引入一些问题。

- 数据库中的实体与页面元素不一致问题。
- 数据库的实体的设计往往不能体现类与类之间的复杂关系，如继承，对应关系。
  - 继承，比如A,B继承于C，如果A，B单独建表，会存在冗余，如果A,B一个表进行表示，就会存在大量的空白字段。
  - 1对多，比如A中包含多个B，在JAVA代码中是用List表示的，但是数据库中只会在A中存储B的引用。在实际中的业务，虽然是对一个实体的操作，我们往往要对数据库中多个表进行操作。
- 数据库中的实体会在散落在多处代码中改变，由此导致的矛盾没法定位的问题

领域驱动设计(Domain-Driven Design,DDD)，开发团队和领域专家一起通过 `通用语言` 去理解和消化领域知识， 从领域知识中提取和划分以一个子领域 ，构建出一套符合当前领域的模型。
第一步就是考虑领域模型，而不是将其分割为数据和行为，然后数据用数据库实现，行为用服务实现。DDD关注于业务而不是数据。

其特点在于：领域模型准确地反映了业务语言，避免了只关系数据，这些数据对象只拥有setter/getter方法外，没有任何业务方法。

关键在于如何划分领域，划分好边界

## 与微服务的关系

DDD解决了微服务的拆分边界困难。
微服务讲究高内聚，低耦合。DDD通过聚合将关联性强的业务划分到一个边界之中。


# 面向切面编程

## 实现

编译期、字节码加载前、字节码加载后三种时机来实现AOP

## 角色

AOP联盟、aspectj、jboss AOP、Spring自身实现的AOP、Spring嵌入aspectj。

## 接口设计

AOP联盟定义的概念或接口：Pointcut（概念，没有定义对应的接口）、Joinpoint、Advice、MethodInterceptor、MethodInvocation

SpringAOP针对上述Advice接口定义的接口及其实现类：BeforeAdvice、AfterAdvice、MethodBeforeAdvice、AfterReturningAdvice；针对aspectj对上述接口的实现AspectJMethodBeforeAdvice、AspectJAfterReturningAdvice、AspectJAfterThrowingAdvice、AspectJAfterAdvice。

SpringAOP定义的定义的AdvisorAdapter接口：将上述Advise转化为MethodInterceptor

SpringAOP定义的Pointcut接口：含有两个属性ClassFilter（过滤类）、MethodMatcher（过滤方法）

SpringAOP定义的ExpressionPointcut接口：实现中会引入aspectj的pointcut表达式

SpringAOP定义的PointcutAdvisor接口（将上述Advice接口和Pointcut接口结合起来）


 